<app-header></app-header>

<app-main-menu></app-main-menu>

<section id="content" class="content">

    <h2> Reviews </h2>

    <p-panel header="All Reviews">

        <h4> Service Reviews </h4>

        <p-table [value]="serviceReviews">
            <ng-template pTemplate="header">
                <tr>
                    <th>Review ID</th>
                    <th>Service Name</th>
                    <th>Customer Name</th>
                    <th>Rating</th>
                    <th>View Details</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-review>
                <tr>
                    <td>{{review.reviewId}}</td>
                    <td>{{review.booking.service.serviceName}}</td>
                    <td>{{review.booking.customer.firstName}}</td>
                    <!-- <td><p-rating [(ngModel)]="review.rating" stars="5" readonly="true" enabled="true" iconCancelClass="" ngDefaultControls></p-rating></td> -->
                    <td>{{review.rating}}</td>
                    <td style="text-align: center;">
                        <p-button label="View" (onClick)="showServiceDialog(review)"></p-button>
                    </td>
                </tr>
            </ng-template>
        </p-table>

        <br /><br />

        <h4> Product Reviews </h4>

        <p-table [value]="productReviews">
            <ng-template pTemplate="header">
                <tr>
                    <th>Review ID</th>
                    <th>Product Name</th>
                    <th>Customer Name</th>
                    <th>Rating</th>
                    <th>View Details</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-review>
                <tr>
                    <td>{{review.reviewId}}</td>
                    <td>{{review.purchasedLineItem.product.name}}</td>
                    <td>{{review.customer.firstName}}</td>
                    <td>{{review.rating}}</td>
                    <td style="text-align: center;">
                        <p-button label="View" (onClick)="showProductDialog(review)"></p-button>
                    </td>
                </tr>
            </ng-template>
        </p-table>

        <p-dialog *ngIf="displayService" header="View Service Review Details" modal="true" [(visible)]="displayService"
            [style]="{width: '50vw'}">
            <div class="ui-g">
                <div class="ui-g-6" style="background-color: #f4f4f4;">Review ID</div>
                <div class="ui-g-6">{{serviceReviewToView.reviewId}}</div>
            </div>
            <div class="ui-g">
                <div class="ui-g-6" style="background-color: #f4f4f4;">Service Name</div>
                <div class="ui-g-6">{{serviceReviewToView.booking.service.serviceName}}</div>
            </div>
            <div class="ui-g">
                <div class="ui-g-6" style="background-color: #f4f4f4;">Customer Name</div>
                <div class="ui-g-6">{{serviceReviewToView.booking.customer.firstName}} {{serviceReviewToView.booking.customer.lastName}}</div>
            </div>
            <div class="ui-g">
                <div class="ui-g-6" style="background-color: #f4f4f4;">Date Of Appointment</div>
                <div class="ui-g-6">{{parseDate(serviceReviewToView.booking.dateOfAppointment) | date:'MMM d, yyyy'}}</div>
            </div>
            <div class="ui-g">
                <div class="ui-g-6" style="background-color: #f4f4f4;">Review Rating</div>
                <div class="ui-g-6">{{serviceReviewToView.rating}}</div>
            </div>
            <div class="ui-g">
                <div class="ui-g-6" style="background-color: #f4f4f4;">Review Description</div>
                <div class="ui-g-6">{{serviceReviewToView.description}}</div>
            </div>
        </p-dialog>

        <p-dialog *ngIf="displayProduct" header="View Product Review Details" modal="true" [(visible)]="displayProduct"
            [style]="{width: '50vw'}">
            <div class="ui-g">
                <div class="ui-g-6" style="background-color: #f4f4f4;">Review ID</div>
                <div class="ui-g-6">{{productReviewToView.reviewId}}</div>
            </div>
            <div class="ui-g">
                <div class="ui-g-6" style="background-color: #f4f4f4;">Product Name</div>
                <div class="ui-g-6">{{productReviewToView.purchasedLineItem.product.name}}</div>
            </div>
            <div class="ui-g">
                <div class="ui-g-6" style="background-color: #f4f4f4;">Customer Name</div>
                <div class="ui-g-6">{{productReviewToView.customer.firstName}} {{productReviewToView.customer.lastName}}</div>
            </div>
            <div class="ui-g">
                <div class="ui-g-6" style="background-color: #f4f4f4;">Date Of Purchase</div>
                <div class="ui-g-6">{{parseDate(productReviewToView.purchasedLineItem.purchased.dateOfPurchase) | date:'MMM d, yyyy'}}</div>
            </div>
            <div class="ui-g">
                <div class="ui-g-6" style="background-color: #f4f4f4;">Review Rating</div>
                <div class="ui-g-6">{{productReviewToView.rating}}</div>
            </div>
            <div class="ui-g">
                <div class="ui-g-6" style="background-color: #f4f4f4;">Review Description</div>
                <div class="ui-g-6">{{productReviewToView.description}}</div>
            </div>
        </p-dialog>

    </p-panel>
</section>

<app-footer></app-footer>